# 虚拟内存

## 页表

页表就是一个页表条目的数组，虚拟地址空间中的每个页在页表中一个固定偏移量处都有一个PTE

## 虚拟内存的好处

1. 简化链接，独立的地址空间允许每个进程的内存映像使用相同的基本格式，而不管代码和数据实际存放在物理内存的何处
2. 简化加载，使得容易向内存中加载可执行文件和共享对象文件
3. 简化共享，独立地址空间为操作系统提供了一个管理用户进程和操作系统自身之间共享的一致机制。每个进程都有自己私有的代码、数据、堆栈域，是不和其他进程共享的，在这种情况下操作系统创建页表，将相应的虚拟页映射到不连续的物理页面。**但有些情况需要进程共享代码和数据，这时操作系统通过将不同进程中适当的虚拟页面映射到相同的物理页面，从而安排多个进程共享这部分代码的一个副本，而不是每个进程中都包括单独的内核和共享代码的副本**。
4. 简化内存分配，虚拟内存为用户进程提供一个简单的分配额外内存的机制，当一个运行在用户进程中的程序要求额外的堆空间时，操作系统分配一个适当数字个连续的虚拟内存页面，并且将它们映射到物理内存中任意位置的k个任意的物理页面。

## 内存映射

Linux通过将一个虚拟内存区域与一个磁盘上的对象关联起来，以初始化这个虚拟内存区域的内容，这个过程称为内存映射

## 虚拟内存区域可以映射的文件类型

1. Linux文件系统中的普通文件
2. 匿名文件



